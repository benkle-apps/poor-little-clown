[gd_scene load_steps=43 format=3 uid="uid://cw5vur68c6e31"]

[ext_resource type="Script" path="res://Scripts/Circus.gd" id="1_4csm5"]
[ext_resource type="Script" path="res://Scripts/Effects/StageLightsAnimator.gd" id="2_ofu1d"]
[ext_resource type="Texture2D" uid="uid://cak7nbp1ha28r" path="res://Assets/Backgrounds/Circus Bowl/Tent.png" id="3_0olhk"]
[ext_resource type="Texture2D" uid="uid://dgxbm5hhrfxuv" path="res://Assets/Backgrounds/Circus Bowl/Viewers Back.png" id="4_r5m4m"]
[ext_resource type="Script" path="res://Scripts/Effects/ViewersLights.gd" id="5_5v2bv"]
[ext_resource type="Texture2D" uid="uid://naitlwv5cust" path="res://Assets/Backgrounds/Circus Bowl/Viewers mid.png" id="6_ipxt6"]
[ext_resource type="Texture2D" uid="uid://dc661i68btq2e" path="res://Assets/Backgrounds/Circus Bowl/Viewers Front.png" id="7_bklfl"]
[ext_resource type="Texture2D" uid="uid://pgf6tn6nsj73" path="res://Assets/Backgrounds/Circus Bowl/Sandpit.png" id="8_rhfor"]
[ext_resource type="PackedScene" uid="uid://4vbuf7r73x6m" path="res://Assets/Flashes/flash.tscn" id="9_mn4rg"]
[ext_resource type="Script" path="res://Scripts/Music/BackgroundMusic.gd" id="10_i8cn3"]
[ext_resource type="AudioStream" uid="uid://cevxfy3h42xja" path="res://Assets/Sounds/BackgroundMusic/Circus/cancan-15542.mp3" id="11_3fisa"]
[ext_resource type="AudioStream" uid="uid://63recdfxadu" path="res://Assets/Sounds/BackgroundMusic/Circus/orchestral-comedy-15548.mp3" id="12_0kfw4"]
[ext_resource type="AudioStream" uid="uid://dnfnmfahw7ce3" path="res://Assets/Sounds/BackgroundMusic/Circus/vodevil-15550.mp3" id="13_qql34"]
[ext_resource type="Script" path="res://Scripts/Sound/CrowdBackNoise.gd" id="14_qhap5"]
[ext_resource type="AudioStream" uid="uid://dymoqro3ow25t" path="res://Assets/Sounds/Circus/Audience/338254__leo153__theater_audience_mincing.wav" id="15_ge4dh"]
[ext_resource type="AudioStream" uid="uid://q5yhsy6lb3t4" path="res://Assets/Sounds/Circus/Audience/365662__csaszi__granular-laughing-csg.wav" id="16_auneo"]
[ext_resource type="Script" path="res://Scripts/Sound/Random_Laugh.gd" id="17_dwa06"]
[ext_resource type="AudioStream" uid="uid://6eemg6h8jtev" path="res://Assets/Sounds/Circus/Audience/119459__eneasz__male-laughte effektiertr.wav" id="18_hgvu2"]
[ext_resource type="AudioStream" uid="uid://dqmff3eb1iw3w" path="res://Assets/Sounds/Circus/Audience/554908__driney__crazy-laugh hallig.wav" id="19_8fdwx"]
[ext_resource type="AudioStream" uid="uid://mk5u6oka58hj" path="res://Assets/Sounds/Circus/Audience/670839__tomaszblaszczyk__mans-laugh hall.wav" id="20_35a18"]
[ext_resource type="AudioStream" uid="uid://6f80pmb1ir6y" path="res://Assets/Sounds/Circus/Audience/525065__rickplayer__laugh.mp3" id="21_l5ngc"]
[ext_resource type="Texture2D" uid="uid://b325s7lnue8ou" path="res://Assets/Clowny/Circus/Joggling/joggling 1.png" id="22_bih2t"]
[ext_resource type="Script" path="res://Scripts/Acts.gd" id="22_nuily"]
[ext_resource type="Script" path="res://Scripts/Acts/Juggling.gd" id="22_vo708"]
[ext_resource type="Texture2D" uid="uid://ddu8daxwkkq5y" path="res://Assets/Clowny/Circus/Joggling/joggling 2.png" id="23_8rpmd"]
[ext_resource type="PackedScene" uid="uid://c6bixybwlq2d" path="res://Scenes/JugglingBall.tscn" id="23_ptw8d"]
[ext_resource type="Script" path="res://Scripts/Acts/Unicycle.gd" id="27_fhb3v"]
[ext_resource type="Texture2D" uid="uid://b60sha7pcix4c" path="res://Assets/Clowny/Circus/one wheel/one wheel 1.png" id="27_hln7s"]
[ext_resource type="Texture2D" uid="uid://jiyg46jj7aul" path="res://Assets/Buttons/Artboard2.png" id="27_vvshc"]
[ext_resource type="Texture2D" uid="uid://boyabtugbwtwk" path="res://Assets/Buttons/Artboard3.png" id="28_4ixbv"]
[ext_resource type="Texture2D" uid="uid://3wb5uwu1c6u3" path="res://Assets/Clowny/Circus/one wheel/one wheel 2.png" id="28_e3emj"]
[ext_resource type="Texture2D" uid="uid://cdsc2v65tav0c" path="res://Assets/Buttons/Artboard4.png" id="29_vkyjg"]
[ext_resource type="Texture2D" uid="uid://2bbkicdv5vix" path="res://Assets/Clowny/Circus/pie/pie1.png" id="30_58fkr"]
[ext_resource type="Script" path="res://Scripts/Acts/Pie.gd" id="30_biymb"]
[ext_resource type="Texture2D" uid="uid://cf8kne61pr8rt" path="res://Assets/Clowny/Circus/pie/pie2.png" id="31_a0tfa"]
[ext_resource type="Texture2D" uid="uid://bedwxa4fiocte" path="res://Assets/Clowny/Circus/pie/pie3.png" id="32_xwl8a"]
[ext_resource type="Texture2D" uid="uid://4qyh8ijiaicj" path="res://Assets/Clowny/Circus/Extras/pie.png" id="34_23vrb"]

[sub_resource type="SpriteFrames" id="SpriteFrames_8kxqx"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("22_bih2t")
}, {
"duration": 1.0,
"texture": ExtResource("23_8rpmd")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="Curve2D" id="Curve2D_bau0j"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 512, 443, 0, 0, 0, 0, 513, 424, 44, 87, -44, -87, 440, 303, -33, 19, 33, -19, 476, 143, -63, -22, 63, 22, 617, 147, 0, 0, 0, 0, 647, 302, 0, 0, 0, 0, 550, 449, 0, 0, 0, 0, 548, 425, -138, 15, 138, -15, 539, 252, 0, 0, 0, 0, 510, 441, 0, 0, 0, 0, 512, 443)
}
point_count = 11

[sub_resource type="SpriteFrames" id="SpriteFrames_v7jnb"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("27_hln7s")
}, {
"duration": 1.0,
"texture": ExtResource("28_e3emj")
}],
"loop": true,
"name": &"default",
"speed": 5.0
}]

[sub_resource type="SpriteFrames" id="SpriteFrames_cvny5"]
animations = [{
"frames": [{
"duration": 2.0,
"texture": ExtResource("30_58fkr")
}, {
"duration": 1.0,
"texture": ExtResource("31_a0tfa")
}, {
"duration": 4.0,
"texture": ExtResource("32_xwl8a")
}],
"loop": false,
"name": &"default",
"speed": 2.0
}]

[sub_resource type="Curve2D" id="Curve2D_wyk1e"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 3784.59, 2956.24, 989.508, 938.327, -989.508, -938.327, 1671.91, 220.388, 0, 0, 0, 0, 60.7969, -623.166)
}
point_count = 3

[node name="Circus" type="Node2D"]
script = ExtResource("1_4csm5")

[node name="Background" type="Node2D" parent="."]
position = Vector2(433, 254)
scale = Vector2(0.217316, 0.217316)
script = ExtResource("2_ofu1d")
lightsColors = Array[Color]([Color(0.980392, 0.713726, 1, 1), Color(0.662745, 0.807843, 1, 1), Color(0.858824, 0.996078, 0.74902, 1)])
changeTimes = Array[float]([7.0, 5.0])

[node name="Tent" type="Sprite2D" parent="Background"]
position = Vector2(469, 313)
texture = ExtResource("3_0olhk")

[node name="ViewersBack" type="Sprite2D" parent="Background"]
position = Vector2(469, 313)
texture = ExtResource("4_r5m4m")
script = ExtResource("5_5v2bv")
lightsColor = Color(0, 0.584314, 0.6, 1)
colorChange = true

[node name="ViewersMid" type="Sprite2D" parent="Background"]
position = Vector2(469, 313)
texture = ExtResource("6_ipxt6")
script = ExtResource("5_5v2bv")

[node name="ViewersFront" type="Sprite2D" parent="Background"]
position = Vector2(469, 313)
texture = ExtResource("7_bklfl")
script = ExtResource("5_5v2bv")

[node name="Sandpit" type="Sprite2D" parent="Background"]
position = Vector2(469, 313)
texture = ExtResource("8_rhfor")

[node name="Flashes" type="Node" parent="Background"]

[node name="Flash1" parent="Background/Flashes" instance=ExtResource("9_mn4rg")]
position = Vector2(230, 153)

[node name="Flash2" parent="Background/Flashes" instance=ExtResource("9_mn4rg")]
position = Vector2(23, 248)

[node name="Flash3" parent="Background/Flashes" instance=ExtResource("9_mn4rg")]
position = Vector2(639, 127)

[node name="Flash4" parent="Background/Flashes" instance=ExtResource("9_mn4rg")]
position = Vector2(1169, 182)

[node name="Flash5" parent="Background/Flashes" instance=ExtResource("9_mn4rg")]
position = Vector2(744, 289)

[node name="Flash6" parent="Background/Flashes" instance=ExtResource("9_mn4rg")]
position = Vector2(1085, 329)

[node name="Audio" type="Node2D" parent="."]

[node name="AudioListener2D" type="AudioListener2D" parent="Audio"]
position = Vector2(573, 300)
current = true

[node name="BackgroundMusic" type="AudioStreamPlayer" parent="Audio"]
mix_target = 1
script = ExtResource("10_i8cn3")
songs = Array[AudioStream]([ExtResource("11_3fisa"), ExtResource("12_0kfw4"), ExtResource("13_qql34")])

[node name="CrowdBackNoise" type="AudioStreamPlayer" parent="Audio"]
volume_db = 12.219
mix_target = 1
script = ExtResource("14_qhap5")
quite = ExtResource("15_ge4dh")
excited = ExtResource("16_auneo")

[node name="Random_Laugh" type="AudioStreamPlayer" parent="Audio"]
volume_db = 14.235
script = ExtResource("17_dwa06")
laughs = Array[AudioStream]([ExtResource("18_hgvu2"), ExtResource("19_8fdwx"), ExtResource("20_35a18"), ExtResource("21_l5ngc")])

[node name="Acts" type="Node2D" parent="."]
script = ExtResource("22_nuily")

[node name="Juggling" type="Node2D" parent="Acts"]
script = ExtResource("22_vo708")
ball = ExtResource("23_ptw8d")

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Acts/Juggling"]
position = Vector2(419, 424)
scale = Vector2(0.128778, 0.128396)
sprite_frames = SubResource("SpriteFrames_8kxqx")
autoplay = "default"

[node name="Path" type="Path2D" parent="Acts/Juggling"]
curve = SubResource("Curve2D_bau0j")

[node name="HideTimer" type="Timer" parent="Acts/Juggling"]
wait_time = 3.0
one_shot = true

[node name="Unicycle" type="Node2D" parent="Acts"]
visible = false
position = Vector2(535, 590)
script = ExtResource("27_fhb3v")

[node name="Timer" type="Timer" parent="Acts/Unicycle"]
wait_time = 0.5

[node name="AnimatedSprite2D" type="AnimatedSprite2D" parent="Acts/Unicycle"]
position = Vector2(8.00006, -185)
scale = Vector2(0.13116, 0.13116)
sprite_frames = SubResource("SpriteFrames_v7jnb")
autoplay = "default"

[node name="Pie" type="Node2D" parent="Acts"]
visible = false
position = Vector2(542, 424)
scale = Vector2(0.131586, 0.131586)
script = ExtResource("30_biymb")

[node name="Pied" type="AnimatedSprite2D" parent="Acts/Pie"]
sprite_frames = SubResource("SpriteFrames_cvny5")

[node name="Pie" type="Path2D" parent="Acts/Pie"]
curve = SubResource("Curve2D_wyk1e")

[node name="Follow" type="PathFollow2D" parent="Acts/Pie/Pie"]
position = Vector2(3784.59, 2956.24)
rotation = -2.22837

[node name="Sprite" type="Sprite2D" parent="Acts/Pie/Pie/Follow"]
position = Vector2(12.9385, 7.9754)
rotation = 2.12322
scale = Vector2(2, 2)
texture = ExtResource("34_23vrb")

[node name="JugglingButton" type="CharacterBody2D" parent="Acts"]
input_pickable = true

[node name="Sprite" type="Sprite2D" parent="Acts/JugglingButton"]
position = Vector2(1076, 61)
scale = Vector2(0.118405, 0.118405)
texture = ExtResource("27_vvshc")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Acts/JugglingButton"]
polygon = PackedVector2Array(1021, 20, 1021, 105, 1130, 107, 1129, 18)

[node name="UnicycleButton" type="CharacterBody2D" parent="Acts"]
position = Vector2(-127, -2)
input_pickable = true

[node name="Sprite" type="Sprite2D" parent="Acts/UnicycleButton"]
position = Vector2(1076, 61)
scale = Vector2(0.118405, 0.118405)
texture = ExtResource("28_4ixbv")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Acts/UnicycleButton"]
polygon = PackedVector2Array(1021, 20, 1021, 105, 1130, 107, 1129, 18)

[node name="PieButton" type="CharacterBody2D" parent="Acts"]
position = Vector2(-251, -1)
input_pickable = true

[node name="Sprite" type="Sprite2D" parent="Acts/PieButton"]
position = Vector2(1076, 61)
scale = Vector2(0.118405, 0.118405)
texture = ExtResource("29_vkyjg")

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="Acts/PieButton"]
polygon = PackedVector2Array(1021, 20, 1021, 105, 1130, 107, 1129, 18)

[node name="Descore" type="Timer" parent="."]
wait_time = 3.0
autostart = true

[connection signal="audience_excited" from="." to="Audio/CrowdBackNoise" method="audience_excited"]
[connection signal="audience_excited" from="." to="Audio/Random_Laugh" method="_on_node_2d_audience_excited"]
[connection signal="audience_very_excited" from="." to="Audio/Random_Laugh" method="audience_very_excited"]
[connection signal="flashes" from="." to="Background/Flashes/Flash1" method="set_likelyhood"]
[connection signal="flashes" from="." to="Background/Flashes/Flash2" method="set_likelyhood"]
[connection signal="flashes" from="." to="Background/Flashes/Flash3" method="set_likelyhood"]
[connection signal="flashes" from="." to="Background/Flashes/Flash4" method="set_likelyhood"]
[connection signal="flashes" from="." to="Background/Flashes/Flash5" method="set_likelyhood"]
[connection signal="flashes" from="." to="Background/Flashes/Flash6" method="set_likelyhood"]
[connection signal="start" from="." to="Audio/BackgroundMusic" method="play_song"]
[connection signal="start" from="." to="Audio/CrowdBackNoise" method="_on_finished"]
[connection signal="finished" from="Audio/BackgroundMusic" to="Audio/BackgroundMusic" method="_on_finished"]
[connection signal="finished" from="Audio/CrowdBackNoise" to="Audio/CrowdBackNoise" method="_on_finished"]
[connection signal="do_score" from="Acts/Juggling" to="." method="basic_scoring"]
[connection signal="timeout" from="Acts/Juggling/HideTimer" to="Acts/Juggling" method="_on_hide_timer_timeout"]
[connection signal="do_score" from="Acts/Unicycle" to="." method="basic_scoring"]
[connection signal="timeout" from="Acts/Unicycle/Timer" to="Acts/Unicycle" method="_on_timer_timeout"]
[connection signal="do_score" from="Acts/Pie" to="." method="basic_scoring"]
[connection signal="pie_fling_finished" from="Acts/Pie" to="Acts" method="_on_pie_pie_fling_finished"]
[connection signal="pie_has_hit" from="Acts/Pie" to="Acts" method="_on_pie_pie_has_hit"]
[connection signal="animation_finished" from="Acts/Pie/Pied" to="Acts/Pie" method="_on_pied_animation_finished"]
[connection signal="input_event" from="Acts/JugglingButton" to="Acts" method="_juggling_button_pressed"]
[connection signal="input_event" from="Acts/UnicycleButton" to="Acts" method="_unicycle_button_pressed"]
[connection signal="input_event" from="Acts/PieButton" to="Acts" method="_cake_button_pressed"]
[connection signal="timeout" from="Descore" to="." method="_on_descore_timeout"]
